doctype html
html(lang="ru")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        title –ú–∞—Ç—Ä–∏—Ü–∞ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π —Å —Å–∞–º–æ–æ—Ü–µ–Ω–∫–æ–π
        link(rel="stylesheet", href="styles.css")
    body
        h1 –ú–∞—Ç—Ä–∏—Ü–∞ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π —Å—Ç—É–¥–µ–Ω—Ç–∞-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (–≤–µ—Ä—Å–∏—è #{matrix.version})
        .table-container
            table#matrix-table
                thead
                    tr
                        th.category-col –ö–∞—Ç–µ–≥–æ—Ä–∏—è
                        th.subcategory-col –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è
                        th.skill-col –ù–∞–≤—ã–∫
                        th.type-col –¢–∏–ø
                        th.self-col –°–∞–º–æ–æ—Ü–µ–Ω–∫–∞ (1-5)
                        th.freq-col –ß–∞—Å—Ç–æ—Ç–∞ (1-5)
                        th.conf-col –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (1-5)
                        th.date-col –î–∞—Ç–∞
                        th.note-col –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
                tbody
                    each category in matrix.categories
                        - let firstRowCat = true
                        each subcategory, subIndex in category.subcategories
                            - let firstRowSub = true
                            - let subcatNum = subIndex + 1
                            each skill, skillIndex in subcategory.skills
                                tr(data-category=category.key, data-subcat=subIndex, data-skill=skillIndex, data-id=`${category.key}-${subIndex}-${skillIndex}`)
                                    // –Ø—á–µ–π–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ –≤—Å–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
                                    if firstRowCat && firstRowSub && skillIndex === 0
                                        - const catRowspan = category.subcategories.reduce((acc, sub) => acc + sub.skills.length, 0)
                                        td(rowspan=catRowspan, class=`cat-${category.key} category-col`)= category.name
                                    // –Ø—á–µ–π–∫–∞ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
                                    if firstRowSub && skillIndex === 0
                                        td(rowspan=subcategory.skills.length, class=`subcat-${category.key}${subcatNum} subcategory-col`)= subcategory.name
                                    // –Ø—á–µ–π–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è –Ω–∞–≤—ã–∫–∞
                                    td(class=`${skill.type}-${category.key}${subcatNum} skill-col`)= skill.description
                                    // –Ø—á–µ–π–∫–∞ —Ç–∏–ø–∞ –Ω–∞–≤—ã–∫–∞
                                    td(class=`${skill.type}-${category.key}${subcatNum} type-col`)
                                        span.skill-type= skill.type === 'hard' ? '–•–∞—Ä–¥' : '–°–æ—Ñ—Ç'
                                    // –ü–æ–ª—è –≤–≤–æ–¥–∞
                                    td.self-col: input.rating-input(type="number", min="1", max="5", data-type="self", placeholder="1-5")
                                    td.freq-col: input.rating-input(type="number", min="1", max="5", data-type="freq", placeholder="1-5")
                                    td.conf-col: input.rating-input(type="number", min="1", max="5", data-type="conf", placeholder="1-5")
                                    td.date-col: input.rating-input(type="date", data-type="date")
                                    td.note-col: input.rating-input(type="text", data-type="note", placeholder="–ó–∞–º–µ—Ç–∫–∞")
                                - firstRowSub = false
                                - firstRowCat = false
                            - firstRowSub = true

        .controls
            button#export-btn –≠–∫—Å–ø–æ—Ä—Ç –æ—Ü–µ–Ω–æ–∫ –≤ CSV
            button#reset-btn –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –æ—Ü–µ–Ω–∫–∏

        .note
            strong üé® –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:
            | –ö–∞—Ç–µ–≥–æ—Ä–∏—è ‚Äî –±–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç, –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Äî –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Å–¥–≤–∏–≥, –Ω–∞–≤—ã–∫–∏ ‚Äî –æ—Ç—Ç–µ–Ω–∫–∏ —Å —É–∑–æ—Ä–æ–º –¥–ª—è soft. –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è –≤—Å—è –≥—Ä—É–ø–ø–∞. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

        .color-legend
            h3 –õ–µ–≥–µ–Ω–¥–∞ —Ü–≤–µ—Ç–æ–≤
            table
                thead
                    tr
                        th –ö–∞—Ç–µ–≥–æ—Ä–∏—è
                        th –ë–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç
                        th Hard-—Å–∫–∏–ª–ª (–ø—Ä–∏–º–µ—Ä)
                        th Soft-—Å–∫–∏–ª–ª (–ø—Ä–∏–º–µ—Ä)
                tbody
                    each category in matrix.categories
                        - let exampleNum = 1
                        tr
                            td= category.name
                            td: span.color-sample(class=`cat-${category.key}`)
                            td: span.color-sample(class=`hard-${category.key}${exampleNum}`)
                            td: span.color-sample(class=`soft-${category.key}${exampleNum}`)

        script(src="js/rating.js")